query ListProducts(
  $first: Int
  $after: String
  $channel: String
  $where: ProductWhereInput
  $sortBy: ProductOrder
  $search: String
) {
  products(
    first: $first
    after: $after
    channel: $channel
    where: $where
    sortBy: $sortBy
    search: $search
  ) {
    pageInfo {
      hasNextPage
      hasPreviousPage
      startCursor
      endCursor
    }
    totalCount
    edges {
      node {
        ...Product
      }
    }
  }
}

fragment Product on Product {
  id
  name
  description
  thumbnail(size: 1024) {
    url
    alt
  }
  slug
  externalReference
  productType {
    id
    name
  }
  category {
    id
    name
  }
  created
  updatedAt
  pricing {
    priceRange {
      start {
        gross {
          currency
          amount
        }
      }
      stop {
        gross {
          currency
          amount
        }
      }
    }
  }
}

query ProductById($id: ID!, $channel: String) {
  product(id: $id, channel: $channel) {
    ...Product
  }
}

query ProductSearch($first: Int!, $search: String!, $channel: String) {
  products(first: $first, filter: { search: $search }, channel: $channel) {
    edges {
      node {
        ...Product
      }
    }
  }
}
